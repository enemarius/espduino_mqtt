<!DOCTYPE html><html
lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><head><link
rel="stylesheet" type="text/css" href="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=fY_RDsIgDEV_aIwt8zN88wsqVCGBMml18vcywoPGZA9Nm9N7b9pZmwwlkeJCAm_l_N2FWoJZG2YdPXXFWMdhW5VJJEiin2tIYPnALw4jsnb-hfHR2zAfGG41mrXNyVvFQKxiolQdZyiYL8HbqmEB8abdFnbMDQ9Tz1_aZg9SsCGniPo0LuP0h9s7v64rMH4hlhLwAw.css" media="all" /><link
rel="stylesheet" type="text/css" href="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=M9TPyE3NK9WPTyvKzytJzUuJT8vMSS3WjweJxhvqxycXF-tnpBblQwSKSyqBsgA.css" media="all" /><link
rel="stylesheet" type="text/css" href="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=M9TPyE3NK9VPLC5OLSnWTy4u1k8rys8rSc1LiS8uqcxJLdYxhCoB8hNLMpPj04DSxfoZqUX5KCIA.css" media="all" /><meta
charset="utf-8"><meta
http-equiv="X-UA-Compatible" content="IE=edge"><meta
name="viewport" content="width=device-width, initial-scale=1"><title>MQTT Client Library Encyclopedia  –  Paho Python</title> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><link
href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700|Roboto:400,300,700' rel='stylesheet'
type='text/css'> <![endif]--><link
rel="canonical" href="http://www.hivemq.com/blog/mqtt-client-library-paho-python" /><meta
name="description" content="Learn from Roger Light, author of the mosquitto MQTT broker, how to use the Eclipse Paho Python library with in-depth examples" /><meta
name="keywords" content="mqtt python,paho python,mosquitto library,mqtt library,mosquitto,mqtt,hivemq" /><meta
property="og:type" content="article" /><meta
property="og:title" content="MQTT Client Library Encyclopedia  –  Paho Python" /><meta
property="og:description" content="Learn from Roger Light, author of the mosquitto MQTT broker, how to use the Eclipse Paho Python library with in-depth examples" /><meta
property="og:url" content="http://www.hivemq.com/blog/mqtt-client-library-paho-python" /><meta
property="og:image" content="http://www.hivemq.com/wp-content/uploads/client-encyclopedia_entwurf41.png" /><meta
property="article:published_time" content="2015-09-28" /><meta
property="article:modified_time" content="2015-09-28" /><meta
property="article:author" content="http://www.hivemq.com/blog/author/the-hivemq-team/" /><meta
property="article:tag" content="MQTT" /><meta
property="article:tag" content="MQTT Client Library Encyclopedia" /><meta
property="og:site_name" content="HiveMQ" /><meta
name="twitter:card" content="summary" /><meta
name="google-site-verification" content="e4c7735fe43fb317" /><link
rel="alternate" type="application/rss+xml" title="HiveMQ &raquo; Feed" href="http://www.hivemq.com/feed/" /><link
rel="alternate" type="application/rss+xml" title="HiveMQ &raquo; Comments Feed" href="http://www.hivemq.com/comments/feed/" /><link
rel="alternate" type="application/rss+xml" title="HiveMQ &raquo; MQTT Client Library Encyclopedia  –  Paho Python Comments Feed" href="http://www.hivemq.com/blog/mqtt-client-library-paho-python/feed/" /><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.hivemq.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.2"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d"),f=String.fromCharCode;return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(f(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(f(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(f(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(f(55357,56835),0,0):e.fillText(f(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style><link
rel='stylesheet' id='ls-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:300%7CRoboto:100,300,regular,500&#038;subset=latin-ext%2Clatin' type='text/css' media='all' /><script type="text/javascript" src="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=M9bPKixNLarUMYYydHMz04sSS1L1cjPzAA.js"></script><script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.hivemq.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script><script type="text/javascript" src="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=M9RPLkqszM_TLa7MK0ms0M3ITM_IAeKS1CL9rGL93Mw8qAI9IFPHQD8jsyw1t9AYJJeYkwMSBAA.js"></script><link
rel='https://api.w.org/' href='http://www.hivemq.com/wp-json/' /><link
rel='prev' title='HiveMQ 3.0 is now available!' href='http://www.hivemq.com/hivemq-3-is-now-available' /><link
rel='next' title='MQTT Client Library Encyclopedia  –  MQTT.DART' href='http://www.hivemq.com/blog/mqtt-client-library-mqtt-dart' /><meta
name="generator" content="WordPress 4.4.2" /><link
rel='shortlink' href='http://www.hivemq.com/?p=1268' /><link
rel="alternate" type="application/json+oembed" href="http://www.hivemq.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.hivemq.com%2Fblog%2Fmqtt-client-library-paho-python" /><link
rel="alternate" type="text/xml+oembed" href="http://www.hivemq.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.hivemq.com%2Fblog%2Fmqtt-client-library-paho-python&#038;format=xml" /><link
rel="icon" href="http://www.hivemq.com/wp-content/uploads/cropped-Unbenannt-1-32x32.png" sizes="32x32" /><link
rel="icon" href="http://www.hivemq.com/wp-content/uploads/cropped-Unbenannt-1-192x192.png" sizes="192x192" /><link
rel="apple-touch-icon-precomposed" href="http://www.hivemq.com/wp-content/uploads/cropped-Unbenannt-1-180x180.png" /><meta
name="msapplication-TileImage" content="http://www.hivemq.com/wp-content/uploads/cropped-Unbenannt-1-270x270.png" /><script type="text/javascript">
        var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e=("https:"==document.location.protocol?"https":"http")+"://piwik.baycix.de/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","5"]);var t=document,p=t.createElement("script"),a=t.getElementsByTagName("script")[0];p.type="text/javascript",p.defer=!0,p.async=!0,p.src=e+"piwik.js",a.parentNode.insertBefore(p,a)}();
        !function(e,a,n,t,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(n),s=a.getElementsByTagName(n)[0],o.async=1,o.src=t,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-50721873-2","hivemq.com"),ga("set","anonymizeIp",!0),ga("send","pageview");
        !function(t,h,e,j,n,s){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:78207,hjsv:5},n=h.getElementsByTagName("head")[0],s=h.createElement("script"),s.async=1,s.src=e+t._hjSettings.hjid+j+t._hjSettings.hjsv,n.appendChild(s)}(window,document,"//static.hotjar.com/c/hotjar-",".js?sv=");
    </script></head><body
class="single single-post postid-1268 single-format-standard"><div
id="main-content-wrap"> <header
class="navbar navbar-fixed-top siteHeader"> <nav
id="site-nav"><script type="text/javascript">
					var ajax_url = "http://www.hivemq.com/wp-admin/admin-ajax.php";
					var hmenu_url = "http://www.hivemq.com/wp-content/plugins/hmenu/";
				</script><script type="text/javascript"> jQuery(function(){ hmenu_activate_menu('1','http://www.hivemq.com/blog/mqtt-client-library-paho-python/'); }); </script><link
href="https://fonts.googleapis.com/css?family=Roboto|Open Sans" rel="stylesheet" type="text/css"><div
id="hmenu_load_1" style="display:none" class="hmenu_load_menu hmenu_unique_menu_1" data-menu-id="1"><div
id="hmenu_holder_1" class="hmenu_main_holder hmenu_main_bg_color" ><div
class="hmenu_inner_holder"><div
class="menu_responsive_label">Menu</div><div
class="hmenu_left"><div
class="hmenu_logo"> <a
href="http://www.hivemq.com" target="_self"> <img
class="logo_main" alt="" src="http://www.hivemq.com/wp-content/uploads/logo.png"> </a></div><div
class="hmenu_grp_devider"></div></div><div
class="hmenu_center"></div><div
class="hmenu_right"><div
class="hmenu_navigation_holder"><ul
class="hmenu_navigation_root hmenu_hover_color hmenu_underline_hover"><li ><a
href="http://www.hivemq.com/mqtt/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_17"><span>MQTT</span></div></a><div
class="hmenu_item_devider"></div></li><li
class="hmenu_mega_li "><a
href="/hivemq/" target="_self" title="HiveMQ"><div
class="hmenu_wrap hmenu_nav_uni_6 hmenu_mega_menu icon_hero_default_thin_e600"><span>HiveMQ</span></div></a><div
class="hmenu_item_devider"></div><div
class="hmenu_submenu hmenu_mega_sub hmenu_drop_devider" ><div
class="hmenu_mega_inner"><div
class="hmenu_col_4 " data-type="images" data-id="1"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/benchmarks/', '_self');" class="hmenu_image_holder hmenu_layout_one"><div
class="hmenu_image_inner"><div
class="hmenu_image_heading">Benchmarks</div><div
class="hmenu_image" style="background-image:url(http://www.hivemq.com/wp-content/uploads/benchmarks.png)"></div><div
class="hmenu_image_desc_wrap"><div
class="hmenu_image_desc">HiveMQ is known for its best-in-class performance and scalability. If you don't believe us, check out our benchmarks conducted on commodity hardware.</div></div></div></div></div></div><div
class="hmenu_col_4 " data-type="list" data-id="2"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('http://www.hivemq.com/features/', '_self');" id="hmenu_list_item_uni_6" class="hmenu_list_item hmenu_item_0 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Features</h3><span>HiveMQ was built enterprise-ready. See the list of all its features here.</span></div></div><div
onclick="window.open('/benchmarks/', '_self');" id="hmenu_list_item_uni_18" class="hmenu_list_item hmenu_item_1 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Benchmarks</h3><span>HiveMQ can handle thousands of simultaneously connected clients with high throughput, see for yourself.</span></div></div><div
onclick="window.open('http://www.hivemq.com/support/', '_self');" id="hmenu_list_item_uni_5" class="hmenu_list_item hmenu_item_2 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Support</h3><span>We offer professional support for HiveMQ to keep your systems up and running.</span></div></div></div></div><div
class="hmenu_col_4 " data-type="list" data-id="3"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('http://www.hivemq.com/try-out/', '_self');" id="hmenu_list_item_uni_7" class="hmenu_list_item hmenu_item_0 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Try out</h3><span>Try out HiveMQ without setting up your own instance by using our public broker and the MQTT web client.</span></div></div><div
onclick="window.open('/downloads/', '_self');" id="hmenu_list_item_uni_20" class="hmenu_list_item hmenu_item_1 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Download</h3><span>Download HiveMQ to prototype your MQTT use-case and evaluate its features and performance </span></div></div></div></div></div></div></li><li
class="hmenu_mega_li "><a
href="/resources/" target="_self" title=""><div
class="hmenu_wrap hmenu_nav_uni_10 hmenu_mega_menu icon_hero_default_thin_e600"><span>Resources</span></div></a><div
class="hmenu_item_devider"></div><div
class="hmenu_submenu hmenu_mega_sub hmenu_drop_devider" ><div
class="hmenu_mega_inner"><div
class="hmenu_col_4 " data-type="images" data-id="2"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/docs/plugins/latest/', '_blank');" class="hmenu_image_holder hmenu_layout_one"><div
class="hmenu_image_inner"><div
class="hmenu_image_heading">Plugin Developer Guide</div><div
class="hmenu_image" style="background-image:url(http://www.hivemq.com/wp-content/uploads/plugin_dev_guide.png)"></div><div
class="hmenu_image_desc_wrap"><div
class="hmenu_image_desc">HiveMQ can be integrated into any existing architecture without hassle by using the open-source plugin SDK. Learn how to integrate your system.</div></div></div></div></div></div><div
class="hmenu_col_4 " data-type="list" data-id="5"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('http://www.hivemq.com/resources/', '_self');" id="hmenu_list_item_uni_21" class="hmenu_list_item hmenu_item_0 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Getting started</h3><span>Here is the central place for all HiveMQ resources that are available. </span></div></div><div
onclick="window.open('http://www.hivemq.com/resources/tutorials/', '_self');" id="hmenu_list_item_uni_10" class="hmenu_list_item hmenu_item_1 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Tutorials</h3><span>These video tutorials show you how to use HiveMQ or setup your plugin development environment.</span></div></div></div></div><div
class="hmenu_col_4 " data-type="list" data-id="6"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/docs/hivemq/latest/', '_blank');" id="hmenu_list_item_uni_12" class="hmenu_list_item hmenu_item_0 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>HiveMQ Documentation</h3><span>User guide for the Enterprise MQTT broker HiveMQ, covering everything you need to know.</span></div></div></div></div></div></div></li><li
class="hmenu_mega_li "><a
href="/extensions/" target="_self" title="HiveMQ Extensions"><div
class="hmenu_wrap hmenu_nav_uni_11 hmenu_mega_menu icon_hero_default_thin_e600"><span>Extensions</span></div></a><div
class="hmenu_item_devider"></div><div
class="hmenu_submenu hmenu_mega_sub hmenu_drop_devider" ><div
class="hmenu_mega_inner"><div
class="hmenu_col_4 " data-type="images" data-id="4"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/extensions/enterprise-integrations', '_self');" class="hmenu_image_holder hmenu_layout_one"><div
class="hmenu_image_inner"><div
class="hmenu_image_heading">Enterprise Integrations</div><div
class="hmenu_image" style="background-image:url(http://www.hivemq.com/wp-content/uploads/enterpise_integrations.png)"></div><div
class="hmenu_image_desc_wrap"><div
class="hmenu_image_desc">HiveMQ enables deep integration into your existing software systems. Learn more about the possibilities and how you can benefit from it.</div></div></div></div></div></div><div
class="hmenu_col_4 " data-type="list" data-id="7"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/extensions/plugins/security/', '_self');" id="hmenu_list_item_uni_15" class="hmenu_list_item hmenu_item_0 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Security Plugins</h3><span>These plugins add custom MQTT authentication and authorization to HiveMQ.</span></div></div><div
onclick="window.open('/extensions/plugins/monitoring/', '_self');" id="hmenu_list_item_uni_16" class="hmenu_list_item hmenu_item_1 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Monitoring Plugins</h3><span>Monitoring is key for any business-critical application. Easy integration in common monitoring tools is enabled by these plugins.</span></div></div><div
onclick="window.open('/extensions/plugins/management/', '_self');" id="hmenu_list_item_uni_17" class="hmenu_list_item hmenu_item_2 " style="color:#CCC; font-size:20px"><div
class="hmenu_list_content"><h3>Management Plugins</h3><span>These plugins leverage the extensibility of HiveMQ to do commonly used management tasks.</span></div></div></div></div><div
class="hmenu_col_4 " data-type="images" data-id="3"><div
class="hmenu_inner_col hmenu_col_load"><div
onclick="window.open('/extensions/plugins/', '_self');" class="hmenu_image_holder hmenu_layout_one"><div
class="hmenu_image_inner"><div
class="hmenu_image_heading">Off-the-shelf Plugins</div><div
class="hmenu_image" style="background-image:url(http://www.hivemq.com/wp-content/uploads/plugins.png)"></div><div
class="hmenu_image_desc_wrap"><div
class="hmenu_image_desc">HiveMQ can be integrated into any existing architecture without hassle by using the open-source plugin SDK.</div></div></div></div></div></div></div></div></li><li ><a
href="http://www.hivemq.com/services/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_18"><span>Services</span></div></a><div
class="hmenu_item_devider"></div></li><li ><a
href="http://www.hivemq.com/pricing/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_13"><span>Pricing</span></div></a><div
class="hmenu_item_devider"></div></li><li ><a
href="/blog/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_14"><span>Blog</span></div></a><div
class="hmenu_item_devider"></div></li><li ><a
href="http://www.hivemq.com/company/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_15"><span>Company</span></div></a><div
class="hmenu_item_devider"></div></li><li ><a
href="http://www.hivemq.com/contact/" target="_self" title="" ><div
class="hmenu_no_sub hmenu_wrap hmenu_nav_uni_16"><span>Contact</span></div></a><div
class="hmenu_item_devider"></div></li></ul></div><div
class="hmenu_grp_devider"></div><div
class="hmenu_toggle_holder hmenu_mobile_show" data-toggle="close"><div
class="hmenu_grp_devider"></div><ul
class="hmenu_hover_color"><li><a><div
class="hmenu_wrap icon_hero_default_thin_e645"></div></a></li></ul></div></div></div></div></div> </nav> </header><div
class="section siteContent"><div
class="container"><div
class="row"><div
class="col-md-8"> <main
class="site-main" id="main" role="main"> <article
id="post-1268" class="post-1268 post type-post status-publish format-standard has-post-thumbnail hentry category-mqtt category-mqtt-client-library-encyclopedia"><h1 class="entry-title">MQTT Client Library Encyclopedia  –  Paho Python</h1><div
class="entry-body"><p><em
style="font-size: 18px">Guest post by Roger Light</em><br
/> <img
src="http://www.hivemq.com/wp-content/uploads/client-encyclopedia_entwurf4.png" alt="" width="1000" height="344" class="aligncenter size-full wp-image-2311" /></p><div
class="clientlib-shortinfo"><table><tbody><tr><td
colspan="2"><strong>Arduino PubSubClient</strong></td></tr><tr><td>Language</td><td>Python</td></tr><tr><td>Website</td><td><a
href="http://eclipse.org/paho/clients/python/">http://eclipse.org/paho/clients/python/</a></td></tr><tr><td>API-Style</td><td>Asynchronous Callbacks, Blocking</td></tr><tr><td>License</td><td>EDL / EPL</td></tr></tbody></table></div><h3>Description</h3><p>The Paho Python library came about because there were no Python libraries for MQTT at the time and this was a big deficiency. It was started out in 2010 as a wrapper around the mosquito C client library, but has long since been pure Python, supporting Python 2.7 and 3.x.</p><p>The library implements a client class that can be used to add MQTT support to your Python program either by creating instances of the client or through inheriting with your own class. It also provides some helper functions to make publishing one shot messages extremely easy.</p><h3>Features</h3><div
class="client-feature-tables row"><div
class="col-md-6"><table><tr><td>MQTT 3.1</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18"/></td></tr><tr><td>MQTT 3.1.1</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>LWT</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>SSL/TLS</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>Automatic Reconnect</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr></table></div><div
class="col-md-6"><table><tr><td>QoS 0</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>QoS 1</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>QoS 2</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>Authentication</td><td><img
src="http://www.hivemq.com/wp-content/uploads/ok.png" alt="ok" width="18" height="18" /></td></tr><tr><td>Throttling</td><td><img
src="http://www.hivemq.com/wp-content/uploads/nok_gray1.png" alt="nok" width="18" height="18" /></td></tr></table></div><div
class="clear:both; height:1px;"></div></div><h2>Usage</h2><h3>Installation</h3><p>Use the standard “pip” tool for installation, either</p><p></p><div
id="crayon-572465afbc932275747916" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Shell</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc932275747916-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc932275747916-1"><span
class="crayon-e">pip </span><span
class="crayon-e">install </span><span
class="crayon-v">paho</span><span
class="crayon-o">-</span><span
class="crayon-v">mqtt</span></div></div></td></tr></table></div></div><p></p><p>Or</p><p></p><div
id="crayon-572465afbc947941166533" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Shell</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc947941166533-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc947941166533-1"><span
class="crayon-e">pip3 </span><span
class="crayon-e">install </span><span
class="crayon-v">paho</span><span
class="crayon-o">-</span><span
class="crayon-v">mqtt</span></div></div></td></tr></table></div></div><p></p><p>depending on whether you are installing on Python 2 or Python 3.</p><h3>Connect</h3><p>This section shows the API usage how to connect with the library to a MQTT broker.</p><p>There are a number of ways to connect to a broker, a simple but incomplete example is given below:</p><p></p><div
id="crayon-572465afbc94c366652252" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-3">3</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-4">4</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-5">5</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-6">6</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-7">7</div><div
class="crayon-num" data-line="crayon-572465afbc94c366652252-8">8</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc94c366652252-1"><span
class="crayon-r">import</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-e">client </span><span
class="crayon-st">as</span><span
class="crayon-h"> </span><span
class="crayon-e">paho</span></div><div
class="crayon-line" id="crayon-572465afbc94c366652252-2">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc94c366652252-3"><span
class="crayon-r">def</span><span
class="crayon-h"> </span><span
class="crayon-e">on_connect</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">flags</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">rc</span><span
class="crayon-sy">)</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc94c366652252-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">print</span><span
class="crayon-sy">(</span>“<span
class="crayon-e">CONNACK </span><span
class="crayon-e">received </span><span
class="crayon-st">with</span><span
class="crayon-h"> </span><span
class="crayon-k ">code</span><span
class="crayon-h"> </span><span
class="crayon-o">%</span><span
class="crayon-v">d</span><span
class="crayon-sy">.</span>”<span
class="crayon-h"> </span><span
class="crayon-o">%</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">rc</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc94c366652252-5">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc94c366652252-6"><span
class="crayon-v">client</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc94c366652252-7"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-v">on_connect</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">on_connect</span></div><div
class="crayon-line" id="crayon-572465afbc94c366652252-8"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">broker</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqttdashboard</span><span
class="crayon-sy">.</span><span
class="crayon-i">com</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">1883</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>This creates a client instance using the default parameters, assigns a callback to be called once a successful connection has occurred, and starts the connection.</p><p>The <code>Client()</code> constructor has  some optional parameters:</p><p></p><div
id="crayon-572465afbc952732056665" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc952732056665-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc952732056665-1"><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-v">client_id</span><span
class="crayon-o">=</span>””<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">clean_session</span><span
class="crayon-o">=</span><span
class="crayon-t">True</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">protocol</span><span
class="crayon-o">=</span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">MQTTv31</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>If you do not specify a client_id, a random id will be generated for you (and clean_session must be set to True). The userdata parameter can be any value or datatype that you wish and the data will be passed to all callbacks as the userdata variable.</p><p>The <code>connect()</code> function has some optional parameters as well:</p><p></p><div
id="crayon-572465afbc956271177078" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc956271177078-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc956271177078-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span><span
class="crayon-v">host</span><span
class="crayon-o">=</span>”<span
class="crayon-i">localhost</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">port</span><span
class="crayon-o">=</span><span
class="crayon-cn">1883</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">keepalive</span><span
class="crayon-o">=</span><span
class="crayon-cn">60</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">bind_address</span><span
class="crayon-o">=</span>””<span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>Hopefully these are all obvious with the exception of bind_address, which allows the socket to be bound to a specific address at the local side of the connection, useful if you have more than one outgoing interface.</p><p>The <code>connect() call</code> blocks until the socket connection is made with the broker, but is asynchronous afterwards, so once it returns you cannot be sure that the broker has accepted the connection – the <code>on_connect() callback</code> should be used for this purpose. A successful connection will result in the rc variable being set to 0, as in the MQTT protocol specification.</p><p>The other functions for connecting are:</p><p></p><div
id="crayon-572465afbc95b954783537" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc95b954783537-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc95b954783537-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc95b954783537-1"><span
class="crayon-e">connect_async</span><span
class="crayon-sy">(</span><span
class="crayon-v">host</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">port</span><span
class="crayon-o">=</span><span
class="crayon-cn">1883</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">keepalive</span><span
class="crayon-o">=</span><span
class="crayon-cn">60</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">bind_address</span><span
class="crayon-o">=</span><span
class="crayon-s">""</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc95b954783537-2"><span
class="crayon-e">connect__srv</span><span
class="crayon-sy">(</span><span
class="crayon-r">self</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">domain</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">keepalive</span><span
class="crayon-o">=</span><span
class="crayon-cn">60</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">bind_address</span><span
class="crayon-o">=</span><span
class="crayon-s">""</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p><code>connect_async()</code> does not block when connecting.<br
/> <code>connect_srv()</code> attempts to use DNS SRV records for a domain to determine the broker address to connect to.</p><h3>Connect with MQTT 3.1 or MQTT 3.1.1</h3><p>To choose which protocol version to connect with, use the protocol parameter to connect():</p><p></p><div
id="crayon-572465afbc960610224787" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc960610224787-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc960610224787-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc960610224787-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>…<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">protocol</span><span
class="crayon-o">=</span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">MQTTv31</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc960610224787-2"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>…<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">protocol</span><span
class="crayon-o">=</span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">MQTTv311</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>MQTT v3.1 will be used by default, but this will change at some point in the future.</p><h3>Connect with LWT</h3><p>To connect with a will, you must call <code>will_set()</code> before connecting to the broker:</p><p></p><div
id="crayon-572465afbc965210468154" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc965210468154-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc965210468154-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc965210468154-3">3</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc965210468154-1"><span
class="crayon-v">client</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc965210468154-2"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">will_set</span><span
class="crayon-sy">(</span><span
class="crayon-v">topic</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">payload</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">qos</span><span
class="crayon-o">=</span><span
class="crayon-cn">0</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">retain</span><span
class="crayon-o">=</span><span
class="crayon-t">False</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc965210468154-3"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">broker</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqttdashboard</span><span
class="crayon-sy">.</span><span
class="crayon-i">com</span>”<span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>The payload here can be a <code>str</code> or <code>bytearray</code>.</p><h3>Connect with Username / Password</h3><p>To connect with a username and password, call <code>username_pw_set()</code> before connecting:</p><p></p><div
id="crayon-572465afbc969477124267" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc969477124267-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc969477124267-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc969477124267-3">3</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc969477124267-1"><span
class="crayon-v">client</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc969477124267-2"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">username_pw_set</span><span
class="crayon-sy">(</span>“<span
class="crayon-i">username</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span>“<span
class="crayon-i">password</span>”<span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc969477124267-3"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">broker</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqttdashboard</span><span
class="crayon-sy">.</span><span
class="crayon-i">com</span>”<span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>The password is optional.</p><h3>Staying connected</h3><p>Once the client is connected, the network traffic between the client and the broker must be processed. This can be done in one of two ways, either a blocking method or with a background thread.</p><p><code>client.loop_forever()</code> will block, processing the network traffic and reconnecting automatically as necessary. This function is most useful if you are only subscribing to the broker and acting on the messages you receive.</p><p><code>client.loop_start()</code> starts a background thread to handle the network traffic and will return immediately. This is better suited to the situation where you wish to do other tasks in your program. It is complemented by the <code>client.loop_stop()</code> function, which stops the background thread.</p><p>Finally, you may also use the raw <code>client.loop()</code> function to process the network traffic manually. If you do this you will need to handle reconnecting yourself, it is recommended to use one of the previous two methods instead.</p><h3>Publish</h3><p></p><div
id="crayon-572465afbc96f505436633" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-3">3</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-4">4</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-5">5</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-6">6</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-7">7</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-8">8</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-9">9</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-10">10</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-11">11</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-12">12</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-13">13</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-14">14</div><div
class="crayon-num" data-line="crayon-572465afbc96f505436633-15">15</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc96f505436633-1"><span
class="crayon-r">import</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-e">client </span><span
class="crayon-st">as</span><span
class="crayon-h"> </span><span
class="crayon-e">paho</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-2"><span
class="crayon-r">import</span><span
class="crayon-h"> </span><span
class="crayon-k ">time</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-3">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc96f505436633-4"><span
class="crayon-r">def</span><span
class="crayon-h"> </span><span
class="crayon-e">on_publish</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">print</span><span
class="crayon-sy">(</span><span
class="crayon-s">"mid: "</span><span
class="crayon-o">+</span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-6"><span
class="crayon-h"> </span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-7"><span
class="crayon-v">client</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-8"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-v">on_publish</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">on_publish</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-9"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">broker</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqttdashboard</span><span
class="crayon-sy">.</span><span
class="crayon-i">com</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">1883</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-10"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">loop_start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-11">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc96f505436633-12"><span
class="crayon-st">while</span><span
class="crayon-h"> </span><span
class="crayon-t">True</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-13"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">temperature</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">read_from_imaginary_thermometer</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-14"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">(</span><span
class="crayon-v">rc</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">publish</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">encyclopedia</span><span
class="crayon-o">/</span><span
class="crayon-i">temperature</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">temperature</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">qos</span><span
class="crayon-o">=</span><span
class="crayon-cn">1</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc96f505436633-15"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">time</span><span
class="crayon-sy">.</span><span
class="crayon-e">sleep</span><span
class="crayon-sy">(</span><span
class="crayon-cn">30</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>This example shows how you might interface to a sensor and publish the data. The client is created, it sets a publish callback, connects to the broker and starts the background network thread. It then sits in a loop reading from an imaginary thermometer every 30 seconds and publishing the value to the “encyclopedia/temperature” topic. The QoS of the message can be controlled with the qos parameter. The payload in this example is “str(temperature)”, but is entirely optional. If not given, a zero length payload will be sent.</p><p>The <code>publish()</code> call returns a tuple of the function return code and the message id of the message being published.  The message id can be used with the on_publish callback to determine when a particular message has been published. The client assigns a message id to all messages internally, even if they are QoS 0.</p><p>The version of the client currently in development offers a different (but still backwards compatible) return value from <code>publish()</code> which provides a better means of determining if a message has been published, as well as a way of blocking until the message has been published:</p><p></p><div
id="crayon-572465afbc975537531872" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc975537531872-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-3">3</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-4">4</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-5">5</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-6">6</div><div
class="crayon-num" data-line="crayon-572465afbc975537531872-7">7</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc975537531872-1"><span
class="crayon-v">msg_info</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">publish</span><span
class="crayon-sy">(</span>…<span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc975537531872-2">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc975537531872-3"><span
class="crayon-st">if</span><span
class="crayon-h"> </span><span
class="crayon-v">msg_info</span><span
class="crayon-sy">.</span><span
class="crayon-e">is_published</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">==</span><span
class="crayon-h"> </span><span
class="crayon-t">False</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc975537531872-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">print</span><span
class="crayon-sy">(</span>“<span
class="crayon-e">Message </span><span
class="crayon-st">is</span><span
class="crayon-h"> </span><span
class="crayon-st">not</span><span
class="crayon-h"> </span><span
class="crayon-e">yet </span><span
class="crayon-v">published</span><span
class="crayon-sy">.</span>”<span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc975537531872-5">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc975537531872-6"><span
class="crayon-c"># This call will block until the message is published.</span></div><div
class="crayon-line" id="crayon-572465afbc975537531872-7"><span
class="crayon-v">msg_info</span><span
class="crayon-sy">.</span><span
class="crayon-e">wait_for_publish</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>The next version of the client will also have the ability to specify per-message callbacks that will be called once that individual message is published, with a function call of the form:</p><p></p><div
id="crayon-572465afbc97a766082070" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc97a766082070-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc97a766082070-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">publish</span><span
class="crayon-sy">(</span>…<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">callback</span><span
class="crayon-o">=</span><span
class="crayon-v">on_publish_msg</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><h3>Publish a retained message</h3><p>To publish a retained message, simply set <code>retain=True</code> in the call to publish:</p><p></p><div
id="crayon-572465afbc97e939694037" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc97e939694037-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc97e939694037-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">publish</span><span
class="crayon-sy">(</span>…<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">retain</span><span
class="crayon-o">=</span><span
class="crayon-t">True</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><h3>Publish using the utility functions</h3><p></p><div
id="crayon-572465afbc982052036851" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc982052036851-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc982052036851-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc982052036851-3">3</div><div
class="crayon-num" data-line="crayon-572465afbc982052036851-4">4</div><div
class="crayon-num" data-line="crayon-572465afbc982052036851-5">5</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc982052036851-1"><span
class="crayon-r">import</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-e">publish </span><span
class="crayon-st">as</span><span
class="crayon-h"> </span><span
class="crayon-e">publish</span></div><div
class="crayon-line" id="crayon-572465afbc982052036851-2">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc982052036851-3"><span
class="crayon-v">publish</span><span
class="crayon-sy">.</span><span
class="crayon-e">single</span><span
class="crayon-sy">(</span><span
class="crayon-v">topic</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">payload</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">qos</span><span
class="crayon-o">=</span><span
class="crayon-cn">0</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">retain</span><span
class="crayon-o">=</span><span
class="crayon-t">False</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">hostname</span><span
class="crayon-o">=</span><span
class="crayon-s">"localhost"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-572465afbc982052036851-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class="crayon-v">port</span><span
class="crayon-o">=</span><span
class="crayon-cn">1883</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">client_id</span><span
class="crayon-o">=</span><span
class="crayon-s">""</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">keepalive</span><span
class="crayon-o">=</span><span
class="crayon-cn">60</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">will</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">auth</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-572465afbc982052036851-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class="crayon-v">tls</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">protocol</span><span
class="crayon-o">=</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-v">MQTTv31</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p> This function creates an MQTT client, connects to a broker and publishes a<br
/> single message. Once the message has been delivered, it disconnects cleanly<br
/> from the broker. It exposes all of the connection options present in the client, but most of them are not needed. A simple example would be:</p><p></p><div
id="crayon-572465afbc987000032866" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc987000032866-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc987000032866-1"><span
class="crayon-v">publish</span><span
class="crayon-sy">.</span><span
class="crayon-e">single</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">encyclopedia</span><span
class="crayon-o">/</span><span
class="crayon-i">temperature</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">payload</span><span
class="crayon-o">=</span>”<span
class="crayon-i">hot</span>”<span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>There is a full description of the the will, auth and tls parameters in the client documentation.</p><p></p><div
id="crayon-572465afbc98c907227755" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc98c907227755-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc98c907227755-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc98c907227755-1"><span
class="crayon-v">publish</span><span
class="crayon-sy">.</span><span
class="crayon-e">multiple</span><span
class="crayon-sy">(</span><span
class="crayon-v">msgs</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">hostname</span><span
class="crayon-o">=</span><span
class="crayon-s">"localhost"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">port</span><span
class="crayon-o">=</span><span
class="crayon-cn">1883</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">client_id</span><span
class="crayon-o">=</span><span
class="crayon-s">""</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">keepalive</span><span
class="crayon-o">=</span><span
class="crayon-cn">60</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-572465afbc98c907227755-2"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class="crayon-v">will</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">auth</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">tls</span><span
class="crayon-o">=</span><span
class="crayon-t">None</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">protocol</span><span
class="crayon-o">=</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-v">MQTTv31</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>This function is identical to publish.single, except that multiple messages can be published at once. The “msgs” parameter is a list of messages to publish. Each message should be a dict of the format</p><p></p><div
id="crayon-572465afbc990798972297" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc990798972297-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc990798972297-1"><span
class="crayon-v">msg</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-s">'topic'</span><span
class="crayon-o">:</span><span
class="crayon-s">"&lt;topic&gt;"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'payload'</span><span
class="crayon-o">:</span><span
class="crayon-s">"&lt;payload&gt;"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'qos'</span><span
class="crayon-o">:</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">qos</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'retain'</span><span
class="crayon-o">:</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">retain</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p></p><h3>Subscribe</h3><p>To subscribe to a topic use something like the example below:</p><p></p><div
id="crayon-572465afbc995009418978" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc995009418978-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-2">2</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-3">3</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-4">4</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-5">5</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-6">6</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-7">7</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-8">8</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-9">9</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-10">10</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-11">11</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-12">12</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-13">13</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-14">14</div><div
class="crayon-num" data-line="crayon-572465afbc995009418978-15">15</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc995009418978-1"><span
class="crayon-r">import</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqtt</span><span
class="crayon-sy">.</span><span
class="crayon-e">client </span><span
class="crayon-st">as</span><span
class="crayon-h"> </span><span
class="crayon-e">paho</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-2">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc995009418978-3"><span
class="crayon-r">def</span><span
class="crayon-h"> </span><span
class="crayon-e">on_subscribe</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">mid</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">granted_qos</span><span
class="crayon-sy">)</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">print</span><span
class="crayon-sy">(</span><span
class="crayon-s">"Subscribed: "</span><span
class="crayon-o">+</span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span><span
class="crayon-o">+</span><span
class="crayon-s">" "</span><span
class="crayon-o">+</span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">granted_qos</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-5">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc995009418978-6"><span
class="crayon-r">def</span><span
class="crayon-h"> </span><span
class="crayon-e">on_message</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">msg</span><span
class="crayon-sy">)</span><span
class="crayon-o">:</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-k ">print</span><span
class="crayon-sy">(</span><span
class="crayon-v">msg</span><span
class="crayon-sy">.</span><span
class="crayon-v">topic</span><span
class="crayon-o">+</span><span
class="crayon-s">" "</span><span
class="crayon-o">+</span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">msg</span><span
class="crayon-sy">.</span><span
class="crayon-v">qos</span><span
class="crayon-sy">)</span><span
class="crayon-o">+</span><span
class="crayon-s">" "</span><span
class="crayon-o">+</span><span
class="crayon-k ">str</span><span
class="crayon-sy">(</span><span
class="crayon-v">msg</span><span
class="crayon-sy">.</span><span
class="crayon-v">payload</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-8">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc995009418978-9"><span
class="crayon-v">client</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">paho</span><span
class="crayon-sy">.</span><span
class="crayon-e">Client</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-10"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-v">on_subscribe</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">on_subscribe</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-11"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-v">on_message</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">on_message</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-12"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">connect</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">broker</span><span
class="crayon-sy">.</span><span
class="crayon-v">mqttdashboard</span><span
class="crayon-sy">.</span><span
class="crayon-i">com</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">1883</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-13"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">subscribe</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">encyclopedia</span><span
class="crayon-o">/</span><span
class="crayon-c">#”, qos=1)</span></div><div
class="crayon-line" id="crayon-572465afbc995009418978-14">&nbsp;</div><div
class="crayon-line" id="crayon-572465afbc995009418978-15"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">loop_forever</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>In this example the on_subscribe and on_message callbacks are demonstrated. on_subscribe is called once the broker has responded to a subscription request. The granted_qos parameter contains a list of the granted QoS (or failure) codes sent by the broker. The on_message callback is called for each message received and the msg variable is an MQTTMessage class, which has members topic, payload, qos, retain and mid. The <code>call to loop_forever()</code> is blocking, which means the client will continue to print out incoming message information until the program is killed.</p><p>In this example, the call to client.subscribe() comes immediately after the <code>call to client.connect()</code>. Whilst this is valid, with a non-durable client the subscription will not be renewed if the connection to the broker drops and is renewed. It is suggested that for simple programs like this, putting the <code>call to subscribe()</code> in the <code>on_connect callback</code> will ensure that the subscription is renewed for each reconnection.</p><p>The subscribe function may be called in one of three ways:</p><h3>Simple string and integer</h3><p></p><div
id="crayon-572465afbc99b193708248" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc99b193708248-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc99b193708248-1"><span
class="crayon-e">subscribe</span><span
class="crayon-sy">(</span><span
class="crayon-s">"my/topic"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">qos</span><span
class="crayon-o">=</span><span
class="crayon-cn">2</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p><code>topic</code>: A string specifying the subscription topic to subscribe to.<br
/> <code>qos</code>: The desired quality of service level for the subscription. Defaults to 0.</p><h3>String and integer tuple</h3><p></p><div
id="crayon-572465afbc99f175665259" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc99f175665259-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc99f175665259-1"><span
class="crayon-e">subscribe</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-s">"my/topic"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">1</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p><code>topic</code>: A tuple of (topic, qos). Both topic and qos must be present in the tuple.</p><h3>List of string and integer tuples</h3><p></p><div
id="crayon-572465afbc9a4123044397" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9a4123044397-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9a4123044397-1"><span
class="crayon-e">subscribe</span><span
class="crayon-sy">(</span><span
class="crayon-sy">[</span><span
class="crayon-sy">(</span><span
class="crayon-s">"my/topic"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">0</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-s">"another/topic"</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">2</span><span
class="crayon-sy">)</span><span
class="crayon-sy">]</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>This allows multiple topic subscriptions in a single SUBSCRIPTION command, which is more efficient than using <code>multiple calls to subscribe()</code>.</p><p><code>topic</code>: A list of tuple of format (topic, qos). Both topic and qos must be present in all of the tuples.</p><h3>Per topic message callbacks</h3><p>It is possible to add callbacks that respond only to messages published within a particular topic pattern. For example, you could subscribe to the topic “encyclopedia/#”, but have a message callback that would fire only for messages on the topic “encyclopedia/+/value”. This would be achieved with the following code:</p><p></p><div
id="crayon-572465afbc9a9069059995" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9a9069059995-1">1</div><div
class="crayon-num" data-line="crayon-572465afbc9a9069059995-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9a9069059995-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">subscribe</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">encyclopedia</span><span
class="crayon-o">/</span><span
class="crayon-c">#”)</span></div><div
class="crayon-line" id="crayon-572465afbc9a9069059995-2"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">message_callback_add</span><span
class="crayon-sy">(</span>“<span
class="crayon-v">encyclopedia</span><span
class="crayon-o">/</span><span
class="crayon-o">+</span><span
class="crayon-o">/</span><span
class="crayon-i">value</span>”<span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">on_message_value</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>where <code>on_message_value</code> has the same format as the <code>message callbacks</code> already mentioned.</p><h3>Unsubscribe</h3><p>To unsubscribe, call:</p><p></p><div
id="crayon-572465afbc9ad601252288" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9ad601252288-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9ad601252288-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">unsubscribe</span><span
class="crayon-sy">(</span><span
class="crayon-v">topic</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>Topic is a single string, or list of strings that are the subscription topics to unsubscribe from.</p><p>The <code>on_unsubscribe callback</code> looks like:</p><p></p><div
id="crayon-572465afbc9b2484331499" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9b2484331499-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9b2484331499-1"><span
class="crayon-e">on_unsubscribe</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><h3>Disconnect</h3><p>To unsubscribe, call:</p><p></p><div
id="crayon-572465afbc9b6078411596" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9b6078411596-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9b6078411596-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">unsubscribe</span><span
class="crayon-sy">(</span><span
class="crayon-v">topic</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>Topic is a single string, or list of strings that are the subscription topics to unsubscribe from.</p><p>The <code>on_unsubscribe callback</code> looks like:</p><p></p><div
id="crayon-572465afbc9ba239761543" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9ba239761543-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9ba239761543-1"><span
class="crayon-e">on_unsubscribe</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">mid</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><h3>Disconnect</h3><p>To disconnect:</p><p></p><div
id="crayon-572465afbc9bf076856398" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9bf076856398-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9bf076856398-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">disconnect</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>The <code>on_disconnect callback</code> looks like:</p><p></p><div
id="crayon-572465afbc9c3154318719" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9c3154318719-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9c3154318719-1"><span
class="crayon-e">on_disconnect</span><span
class="crayon-sy">(</span><span
class="crayon-v">client</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">userdata</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">rc</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>The rc parameter indicates whether this disconnection was intentional <i>(rc=0, after a call disconnect()) or for some other reason (rc=1)</i>.</p><h3>Using SSL / TLS</h3><p>The client supports certificate based TLS. You should call the <code>tls_set() function</code> to enable TLS mode and to specify the CA certificates that you trust.</p><p></p><div
id="crayon-572465afbc9c7472068376" class="crayon-syntax crayon-theme-hivemq crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 20px; margin-bottom: 20px; font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div
class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div><span
class="crayon-language">Python</span></div></div><div
class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div
class="crayon-plain-wrap"></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-572465afbc9c7472068376-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-572465afbc9c7472068376-1"><span
class="crayon-v">client</span><span
class="crayon-sy">.</span><span
class="crayon-e">tls_set</span><span
class="crayon-sy">(</span>“<span
class="crayon-o">/</span><span
class="crayon-v">path</span><span
class="crayon-o">/</span><span
class="crayon-v">to</span><span
class="crayon-o">/</span><span
class="crayon-v">ca</span><span
class="crayon-sy">.</span><span
class="crayon-i">crt</span>”<span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p></p><p>It is also possible to set a client certificate, the certificate verification requirements, the version of TLS to use and the allowable ciphers:<br
/> tls_set(<code>self, ca_certs, certfile=None, keyfile=None, cert_reqs=cert_reqs, tls_version=tls_version, ciphers=None</code>)</p><p>Full details of these parameters is given in the client documentation.</p><h2>Full example application</h2><p>A complete example demonstrating both publish and subscribe, is available in the project git repository:</p><p><a
href="http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.python.git/tree/examples/mqtt_clear_retain.py">http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.python.git/tree/examples/mqtt_clear_retain.py</a></p><p>This example is a utility that can clear retained messages from a broker based on a subscription pattern.</p><h2>Author Information</h2><div
class="authorbox"><div
class="authorimg"> <img
src="http://www.hivemq.com/wp-content/uploads/rogerlight-150x150.png" alt="rogerlight" width="150" height="150" class="alignnone size-thumbnail wp-image-1271" srcset="http://www.hivemq.com/wp-content/uploads/rogerlight-150x150.png 150w, http://www.hivemq.com/wp-content/uploads/rogerlight-180x180.png 180w, http://www.hivemq.com/wp-content/uploads/rogerlight.png 250w" sizes="(max-width: 150px) 100vw, 150px" /></div><div
class="authordesc"> <span
class="name"><strong>Roger Light</strong></span><br
/> Roger is a lecturer in the Electrical and Electronic Engineering Department at the University of Nottingham, UK. As well as developing the Paho Python client, he is also the lead and main developer of the mosquitto MQTT broker.<br
/> <span
class="website"><a
href="http://mosquitto.org/" rel="nofollow"><img
src="http://www.hivemq.com/wp-content/uploads/link_gray.png" alt="" width="18" height="18" />&nbsp;&nbsp;Website</a></span></div><div
style="clear:both; height:1px;"></div></div><p></p><div
style="background: #eeeeee;text-align: center;margin-top: 65px;" class="newsletter-blog-extra"><h3 style="margin-bottom: 3px;padding-top: 25px;">Subscribe to all upcoming Blog Posts</h3><p><span>weekly updates about MQTT and HiveMQ directly to your inbox</span></p><p><link
href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"><style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
        #mc_embed_signup p {display:none;}
        .newsletter-blog-extra p {margin: 0;padding: 0;}
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style><div
id="mc_embed_signup" style="background: #eeeeee;text-align: center;"><form
action="//dc-square.us7.list-manage.com/subscribe/post?u=1a4404f30db2dd0062e8c536d&amp;id=ec725a003f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate style="padding-top: 0px;padding-left: 0px;"> <input
type="hidden" id="group_4" name="group[7249][4]" value="1" class="av-checkbox"></p><div
id="mc_embed_signup_scroll" style="text-align:center;"> <input
type="email" style="display: inline-block;margin-left: 0px;border: solid 1px #D8D8D8;margin-right: 0px;" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required><div
style="position: absolute; left: -5000px;"><input
type="text" name="b_1a4404f30db2dd0062e8c536d_ec725a003f" tabindex="-1" value=""></div><p><div
class="clear" style="text-align:center;display: block;"> <input
type="submit" style="display: inline-block;color:#404040;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div></p></div></form></div></div><p></p></div><div
id="comments" class="comments-area"><div
id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a
rel="nofollow" id="cancel-comment-reply-link" href="/blog/mqtt-client-library-paho-python#respond" style="display:none;">Cancel reply</a></small></h3><form
action="http://www.hivemq.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p
class="comment-notes"><span
id="email-notes">Your email address will not be published.</span> Required fields are marked <span
class="required">*</span></p><p
class="comment-form-comment"><label
for="comment">Comment</label><textarea id="comment" name="14c41-comment" cols="45" rows="8"  aria-required="true" required="required"></textarea><textarea name="comment" style="display:none" rows="1" cols="1"></textarea></p><p
class="comment-form-author"><label
for="author">Name <span
class="required">*</span></label> <input
id="author" name="author" type="text" value="" size="30" aria-required='true' required='required' /></p><p
class="comment-form-email"><label
for="email">Email <span
class="required">*</span></label> <input
id="email" name="email" type="text" value="" size="30" aria-describedby="email-notes" aria-required='true' required='required' /></p><p
class="comment-form-url"><label
for="url">Website</label> <input
id="url" name="url" type="text" value="" size="30" /></p><p
class="form-submit"><input
name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input
type='hidden' name='comment_post_ID' value='1268' id='comment_post_ID' /> <input
type='hidden' name='comment_parent' id='comment_parent' value='0' /></p></form></div></div> </article><nav><ul
class="pager"><li
class="previous"><a
href="http://www.hivemq.com/hivemq-3-is-now-available" rel="nofollow prev">HiveMQ 3.0 is now available!</a></li><li
class="next"><a
href="http://www.hivemq.com/blog/mqtt-client-library-mqtt-dart" rel="nofollow next">MQTT Client Library Encyclopedia  –  MQTT.DART</a></li></ul> </nav> </main></div><div
class="col-md-3 col-md-offset-1 site-sub subSection sidebarContainer"><div
class="sidebar"> <aside
class="widget widget_categories" id="categories-5"><h1 class="widget-title subSection-title">Categories</h1><ul><li
class="cat-item cat-item-6"><a
href="http://www.hivemq.com/blog/hivemq/" >HiveMQ (41)</a></li><li
class="cat-item cat-item-1"><a
href="http://www.hivemq.com/blog/mqtt/" >MQTT (25)</a></li><li
class="cat-item cat-item-9"><a
href="http://www.hivemq.com/blog/mqtt-client-library-encyclopedia/" >MQTT Client Library Encyclopedia (17)</a></li><li
class="cat-item cat-item-7"><a
href="http://www.hivemq.com/blog/mqtt-essentials/" >MQTT Essentials (12)</a></li><li
class="cat-item cat-item-8"><a
href="http://www.hivemq.com/blog/mqtt-security-fundamentals/" >MQTT Security Fundamentals (11)</a></li><li
class="cat-item cat-item-22"><a
href="http://www.hivemq.com/blog/category/mqtt-toolbox/" >MQTT Toolbox (8)</a></li></ul> </aside><aside
class="widget widget_su_siloed_terms" id="su_siloed_terms-2"><h1 class="widget-title subSection-title">Relevant posts</h1><ul><li
class="cat-item cat-item-15"><a
href="http://www.hivemq.com/tag/c/" >C++</a></li><li
class="cat-item cat-item-29"><a
href="http://www.hivemq.com/tag/chrome/" >Chrome</a></li><li
class="cat-item cat-item-13"><a
href="http://www.hivemq.com/tag/client-library/" >Client Library</a></li><li
class="cat-item cat-item-30"><a
href="http://www.hivemq.com/tag/eclipse-paho/" >Eclipse Paho</a></li><li
class="cat-item cat-item-27"><a
href="http://www.hivemq.com/tag/ios/" >iOS</a></li><li
class="cat-item cat-item-21"><a
href="http://www.hivemq.com/tag/java/" >Java</a></li><li
class="cat-item cat-item-14"><a
href="http://www.hivemq.com/tag/mqtt/" >MQTT</a></li><li
class="cat-item cat-item-25"><a
href="http://www.hivemq.com/tag/mqtt-inspector/" >MQTT Inspector</a></li><li
class="cat-item cat-item-28"><a
href="http://www.hivemq.com/tag/mqtt-lens/" >MQTT Lens</a></li><li
class="cat-item cat-item-26"><a
href="http://www.hivemq.com/tag/mqtt-toolbox/" >MQTT Toolbox</a></li><li
class="cat-item cat-item-23"><a
href="http://www.hivemq.com/tag/mqtt-tools/" >MQTT Tools</a></li><li
class="cat-item cat-item-24"><a
href="http://www.hivemq.com/tag/mqtt-fx/" >MQTT.fx</a></li><li
class="cat-item cat-item-16"><a
href="http://www.hivemq.com/tag/php/" >PHP</a></li><li
class="cat-item cat-item-20"><a
href="http://www.hivemq.com/tag/plugin/" >plugin</a></li><li
class="cat-item cat-item-35"><a
href="http://www.hivemq.com/tag/security/" >security</a></li></ul> </aside><aside
class="widget widget_text" id="text-26"><h1 class="widget-title subSection-title">Give HiveMQ a try</h1><div
class="textwidget">HiveMQ is the enterprise broker for enabling your business to handling massive amounts of messages and deep integration in our existing systems. <a
class="action-button" href="/downloads/">Download HiveMQ</a></div> </aside><aside
class="widget widget_text" id="text-25"><h1 class="widget-title subSection-title">Talk to the experts</h1><div
class="textwidget">We use MQTT since 2012. If you have questions about how MQTT and HiveMQ can help your business to evolve into a connected enterprise get in touch.<br/> <a
href="/contact/" class="action-button">Contact us</a></div> </aside></div></div></div></div></div></div></div></div><div
class="clearfix"></div></div><div
class="clearfix"></div> <footer
id="footer"><div
class="footerNewsletter"><div
class="container sectionBox copySection"><div
class="row"><div
class="col-md-8 text-left"> <span
class="foot-newsletter-message">Sign up for our newsletter to keep up with the latest news about HiveMQ and MQTT in general (<a
href="/privacy-policy/">Privacy Policy</a>)</span></div><div
class="col-md-4 text-right"><form
action="http://dc-square.us7.list-manage2.com/subscribe/post?u=1a4404f30db2dd0062e8c536d&amp;id=7b26a67538"
method="post" id="mc-embedded-subscribe-form-footer" name="mc-embedded-subscribe-form"
class="validate" target="_blank" novalidate=""> <input
type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-footer"
class="button"> <input
type="text" value="" name="EMAIL" class="email" id="mce-EMAIL-footer"
placeholder="email address" required=""><div
style="position: absolute; left: -5000px;"><input
type="text"
name="b_1a4404f30db2dd0062e8c536d_7b26a67538"
value=""></div></form></div></div></div></div><div
class="footerSocial"><div
class="container"><div
class="row"><div
class="col-md-4 text-left"> <span
class="foot-copyright">&copy; 2016 <a
href="http://www.dc-square.de/">dc-square
GmbH</a></span></div><div
class="col-md-4 text-center"> <a
href="https://www.facebook.com/HiveMQ" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/facebook.png"/> </a> <a
href="https://www.linkedin.com/company/hivemq" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/linkedin.png"/> </a> <a
href="https://www.twitter.com/HiveMQ" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/twitter.png"/> </a> <a
href="https://www.github.com/HiveMQ" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/github.png"/> </a> <a
href="https://www.facebook.com/HiveMQ" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/youtube.png"/> </a> <a
href="https://plus.google.com/+Hivemq/" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/googleplus.png"/> </a> <a
href="http://www.hivemq.com/feed/" target="_blank"> <img
class="social-foot" src="http://www.hivemq.com/wp-content/themes/hivemq3/images/rss.png"/> </a></div><div
class="col-md-4 text-right"> <a
href="/imprint/" class="foot-dark-link">Imprint</a>&nbsp;&nbsp;&nbsp;<a
href="/privacy-policy/"
class="foot-dark-link">Privacy
Policy</a>;</div></div></div></div><div
class="footerMenuContainer"><div
class="container footer-nav"><div
class="row "><div
class="footerMenu col-sm-3"><div
class="footerLeft"> <nav
class="menu-footer-left-menu-container"><ul
id="menu-footer-left-menu" class="menu nav"><li
id="menu-item-657" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-657"><a
href="http://www.hivemq.com/hivemq/">HiveMQ</a></li><li
id="menu-item-658" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-658"><a
href="http://www.hivemq.com/features/">Features</a></li><li
id="menu-item-659" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-659"><a
href="http://www.hivemq.com/support/">Support</a></li><li
id="menu-item-660" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-660"><a
href="http://www.hivemq.com/try-out/">Try out</a></li><li
id="menu-item-662" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-662"><a
href="http://www.hivemq.com/pricing/">Pricing</a></li></ul></nav></div></div><div
class="footerMenu col-sm-3"><div
class="footerCenterLeft"> <nav
class="menu-footer-second-to-left-container"><ul
id="menu-footer-second-to-left" class="menu nav"><li
id="menu-item-676" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-676"><a
href="http://www.hivemq.com/mqtt/">MQTT</a></li><li
id="menu-item-664" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-664"><a
href="http://www.hivemq.com/services/">Services</a></li><li
id="menu-item-665" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-665"><a
href="http://www.hivemq.com/extensions/">Extensions</a></li><li
id="menu-item-667" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-667"><a
href="http://www.hivemq.com/enterprise-integrations/">Enterprise Integrations</a></li><li
id="menu-item-666" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-666"><a
href="http://www.hivemq.com/plugins/">Plugins</a></li></ul></nav></div></div><div
class="footerMenu col-sm-3"><div
class="footerCenterRight"> <nav
class="menu-footer-second-to-right-container"><ul
id="menu-footer-second-to-right" class="menu nav"><li
id="menu-item-673" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-673"><a
href="http://www.hivemq.com/resources/">Resources</a></li><li
id="menu-item-670" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-670"><a
href="http://www.hivemq.com/resources/getting-started/">Getting Started</a></li><li
id="menu-item-669" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-669"><a
href="http://www.hivemq.com/resources/tutorials/">Tutorials</a></li></ul></nav></div></div><div
class="footerMenu col-sm-3"><div
class="footerRight"> <nav
class="menu-footer-right-container"><ul
id="menu-footer-right" class="menu nav"><li
id="menu-item-916" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-916"><a
href="http://www.hivemq.com/blog/">Blog</a></li><li
id="menu-item-671" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-671"><a
href="http://www.hivemq.com/contact/">Contact</a></li><li
id="menu-item-672" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-672"><a
href="http://www.hivemq.com/company/">Company</a></li><li
id="menu-item-674" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-674"><a
href="http://www.hivemq.com/">Home</a></li></ul></nav></div></div></div></div></div> </footer><div
id="su-footer-links" style="text-align: center;"></div><script type="text/javascript" src="http://www.hivemq.com/wp-content/plugins/w3-total-cache/pub/minify.php?file=fcrRCYAwDEXRhaxB6D6ibcSISUtfRNze4gB-Xu6JlIoqm4fG9XxGFRsi3TWwrpy_nGjv4KIFYAcdoK0Vc7Y8IzWp_iey9AMphhc.js"></script></body></html>